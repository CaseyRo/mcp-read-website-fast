version: '3.8'

services:
    mcp-read-website-fast:
        build: .
        container_name: mcp-read-website-fast
        ports:
            - '3000:3000'
        environment:
            # Transport configuration (HTTP only)
            - PORT=3000

            # Logging configuration
            - LOG_LEVEL=${LOG_LEVEL:-info}
            - MCP_DEBUG=${MCP_DEBUG:-0}
            - MCP_QUIET=${MCP_QUIET:-false}

            # Server configuration
            - NODE_ENV=${NODE_ENV:-production}

            # Debug overrides (can be set in .env file)
            - DEBUG_LEVEL=${DEBUG_LEVEL:-info}
            - VERBOSE_LOGGING=${VERBOSE_LOGGING:-false}
        volumes:
            - mcp-cache:/app/.cache
        restart: unless-stopped
        healthcheck:
            test: ['CMD', 'node', '-e', 'process.exit(0)']
            interval: 30s
            timeout: 10s
            retries: 3
            start_period: 40s

volumes:
    mcp-cache:
        driver: local
